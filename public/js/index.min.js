webpackJsonp([1],{

/***/ 39:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _react = __webpack_require__(1);

var _react2 = _interopRequireDefault(_react);

var _reactDom = __webpack_require__(9);

var _reactDom2 = _interopRequireDefault(_reactDom);

var _Layout = __webpack_require__(40);

var _Layout2 = _interopRequireDefault(_Layout);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var app = document.getElementById('app');
_reactDom2.default.render(_react2.default.createElement(_Layout2.default, null), app);

/***/ }),

/***/ 40:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(1);

var _react2 = _interopRequireDefault(_react);

var _Header = __webpack_require__(41);

var _Header2 = _interopRequireDefault(_Header);

var _Product = __webpack_require__(42);

var _Product2 = _interopRequireDefault(_Product);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Layout = function (_React$Component) {
	_inherits(Layout, _React$Component);

	function Layout(props) {
		_classCallCheck(this, Layout);

		return _possibleConstructorReturn(this, (Layout.__proto__ || Object.getPrototypeOf(Layout)).call(this, props));
	}

	_createClass(Layout, [{
		key: "render",
		value: function render() {
			return _react2.default.createElement(
				"div",
				null,
				_react2.default.createElement(_Header2.default, { text: "Hello React" }),
				_react2.default.createElement(_Product2.default, null)
			);
		}
	}]);

	return Layout;
}(_react2.default.Component);

exports.default = Layout;

/***/ }),

/***/ 41:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(1);

var _react2 = _interopRequireDefault(_react);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Header = function (_React$Component) {
	_inherits(Header, _React$Component);

	function Header(props) {
		_classCallCheck(this, Header);

		return _possibleConstructorReturn(this, (Header.__proto__ || Object.getPrototypeOf(Header)).call(this, props));
	}

	_createClass(Header, [{
		key: "render",
		value: function render() {
			return _react2.default.createElement(
				"h1",
				{ style: { color: '#CB3837' } },
				this.props.text
			);
		}
	}]);

	return Header;
}(_react2.default.Component);

exports.default = Header;

/***/ }),

/***/ 42:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(1);

var _react2 = _interopRequireDefault(_react);

var _reactDom = __webpack_require__(9);

var _reactDom2 = _interopRequireDefault(_reactDom);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Product = function (_Component) {
  _inherits(Product, _Component);

  function Product(props) {
    _classCallCheck(this, Product);

    var _this = _possibleConstructorReturn(this, (Product.__proto__ || Object.getPrototypeOf(Product)).call(this, props));

    _this.state = {
      loading: true,
      products: [],

      product: {
        _id: '',
        name: '',
        price: 0,
        imageUrl: ''
      }
    };

    _this.handleSubmit = _this.handleSubmit.bind(_this);
    return _this;
  }

  // BINDING


  _createClass(Product, [{
    key: 'handleChange',
    value: function handleChange(field, event) {
      var object = this.state.product;
      object[field] = event.target.value;
      this.setState({ product: object });
    }

    // SUBMIT (ADD / EDIT)

  }, {
    key: 'handleSubmit',
    value: function handleSubmit(event) {
      var _this2 = this;

      event.preventDefault();
      var component = this;
      var productId = _reactDom2.default.findDOMNode(component.refs.product_id).value;

      if (productId.length === 0) {
        // INSERT
        var insertData = JSON.stringify({
          name: _reactDom2.default.findDOMNode(this.refs.product_name).value,
          price: _reactDom2.default.findDOMNode(this.refs.product_price).value,
          imageUrl: _reactDom2.default.findDOMNode(this.refs.product_image_url).value
        });

        fetch('/product', {
          method: 'POST',
          body: insertData,
          headers: new Headers({
            'Content-Type': 'application/json'
          })
        }).then(function (res) {
          return res.json();
        }).then(function (data) {
          var products = component.state.products;
          products.push(data);

          component.state.product = {
            _id: '',
            name: '',
            price: 0,
            imageUrl: ''
          };

          component.setState(_this2.state);
        }).catch(function (err) {
          console.log(err);
        });
      } else {
        // EDIT
        var editData = JSON.stringify({
          name: _reactDom2.default.findDOMNode(this.refs.product_name).value,
          price: _reactDom2.default.findDOMNode(this.refs.product_price).value,
          imageUrl: _reactDom2.default.findDOMNode(this.refs.product_image_url).value
        });

        fetch('/product/' + productId, {
          method: 'PUT',
          body: editData,
          headers: new Headers({
            'Content-Type': 'application/json'
          })
        }).then(function (res) {
          return res.json();
        }).then(function (data) {
          var products = component.state.products;
          for (var i = 0; i < products.length; i++) {
            if (products[i]._id === productId) {

              products[i].name = _reactDom2.default.findDOMNode(_this2.refs.product_name).value;
              products[i].price = _reactDom2.default.findDOMNode(_this2.refs.product_price).value;
              products[i].imageUrl = _reactDom2.default.findDOMNode(_this2.refs.product_image_url).value;

              component.state.product = {
                _id: '',
                name: '',
                price: 0,
                imageUrl: ''
              };

              component.setState(_this2.state);

              return false;
            }
          }
        }).catch(function (err) {
          console.log(err);
        });
      }
    }

    // SELECT ROW

  }, {
    key: 'handleSelect',
    value: function handleSelect(productId, event) {
      for (var i = 0; i < this.state.products.length; i++) {
        if (this.state.products[i]._id === productId) {
          this.state.product = this.state.products[i];
          this.setState({ product: this.state.product });
          return false;
        }
      }
    }

    // DELETE

  }, {
    key: 'handleDelete',
    value: function handleDelete(productId, event) {
      var component = this;
      fetch('/product/' + productId, {
        method: 'DELETE',
        headers: new Headers({
          'Content-Type': 'application/json'
        })
      }).then(function (res) {
        return res.json();
      }).then(function (data) {
        var products = component.state.products;
        for (var i = 0; i < products.length; i++) {
          if (products[i]._id === productId) {
            products.splice(i, 1);
            component.setState({ products: products });
            return false;
          }
        }
      }).catch(function (err) {
        console.log(err);
      });
    }
  }, {
    key: 'componentDidMount',
    value: function componentDidMount() {
      var _this3 = this;

      fetch('/product/all').then(function (res) {
        return res.json();
      }).then(function (data) {
        _this3.setState({ products: data });
        _this3.setState({ loading: false });
      });
    }
  }, {
    key: 'render',
    value: function render() {
      var _this4 = this;

      if (this.state.loading === false) {
        return _react2.default.createElement(
          'div',
          null,
          _react2.default.createElement(
            'h1',
            null,
            'Products'
          ),
          _react2.default.createElement(
            'table',
            { className: 'table table-hover' },
            _react2.default.createElement(
              'thead',
              null,
              _react2.default.createElement(
                'tr',
                null,
                _react2.default.createElement(
                  'th',
                  null,
                  'Id'
                ),
                _react2.default.createElement(
                  'th',
                  null,
                  'Name'
                ),
                _react2.default.createElement(
                  'th',
                  null,
                  'Price'
                ),
                _react2.default.createElement(
                  'th',
                  null,
                  'Image'
                ),
                _react2.default.createElement('th', null)
              )
            ),
            _react2.default.createElement(
              'tbody',
              null,
              this.state.products.map(function (p) {
                return _react2.default.createElement(
                  'tr',
                  { key: p._id },
                  _react2.default.createElement(
                    'td',
                    null,
                    p._id
                  ),
                  _react2.default.createElement(
                    'td',
                    null,
                    p.name
                  ),
                  _react2.default.createElement(
                    'td',
                    null,
                    p.price
                  ),
                  _react2.default.createElement(
                    'td',
                    null,
                    _react2.default.createElement('img', { src: p.imageUrl, height: '100px' })
                  ),
                  _react2.default.createElement(
                    'td',
                    { className: 'text-right' },
                    _react2.default.createElement(
                      'div',
                      { className: 'btn-group' },
                      _react2.default.createElement(
                        'button',
                        { className: 'btn btn-danger', onClick: _this4.handleDelete.bind(_this4, p._id) },
                        'Delete'
                      ),
                      _react2.default.createElement(
                        'button',
                        { className: 'btn btn-info', onClick: _this4.handleSelect.bind(_this4, p._id) },
                        'Select'
                      )
                    )
                  )
                );
              })
            )
          ),
          _react2.default.createElement('hr', null),
          _react2.default.createElement(
            'form',
            { onSubmit: this.handleSubmit },
            _react2.default.createElement(
              'div',
              { className: 'form-group' },
              _react2.default.createElement(
                'label',
                null,
                'Id:'
              ),
              _react2.default.createElement('input', { type: 'text', readOnly: true, className: 'input form-control', ref: 'product_id', value: this.state.product._id, onChange: this.handleChange.bind(this, '_id') })
            ),
            _react2.default.createElement(
              'div',
              { className: 'form-group' },
              _react2.default.createElement(
                'label',
                null,
                'Name:'
              ),
              _react2.default.createElement('input', { type: 'text', className: 'input form-control', ref: 'product_name', value: this.state.product.name, onChange: this.handleChange.bind(this, 'name') })
            ),
            _react2.default.createElement(
              'div',
              { className: 'form-group' },
              _react2.default.createElement(
                'label',
                null,
                'Price:'
              ),
              _react2.default.createElement('input', { type: 'text', className: 'input form-control', ref: 'product_price', value: this.state.product.price, onChange: this.handleChange.bind(this, 'price') })
            ),
            _react2.default.createElement(
              'div',
              { className: 'form-group' },
              _react2.default.createElement(
                'label',
                null,
                'Image Url:'
              ),
              _react2.default.createElement('input', { type: 'text', className: 'input form-control', ref: 'product_image_url', value: this.state.product.imageUrl, onChange: this.handleChange.bind(this, 'imageUrl') })
            ),
            _react2.default.createElement(
              'div',
              null,
              _react2.default.createElement('input', { className: 'btn btn-primary', type: 'submit', value: 'Submit' })
            )
          )
        );
      } else {
        return _react2.default.createElement(
          'h1',
          null,
          'Loading ...'
        );
      }
    }
  }]);

  return Product;
}(_react.Component);

exports.default = Product;

/***/ })

},[39]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NvbXBvbmVudHMvTGF5b3V0LmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9jb21wb25lbnRzL0hlYWRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvY29tcG9uZW50cy9Qcm9kdWN0LmpzIl0sIm5hbWVzIjpbImFwcCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJyZW5kZXIiLCJMYXlvdXQiLCJwcm9wcyIsIkNvbXBvbmVudCIsIkhlYWRlciIsImNvbG9yIiwidGV4dCIsIlByb2R1Y3QiLCJzdGF0ZSIsImxvYWRpbmciLCJwcm9kdWN0cyIsInByb2R1Y3QiLCJfaWQiLCJuYW1lIiwicHJpY2UiLCJpbWFnZVVybCIsImhhbmRsZVN1Ym1pdCIsImJpbmQiLCJmaWVsZCIsImV2ZW50Iiwib2JqZWN0IiwidGFyZ2V0IiwidmFsdWUiLCJzZXRTdGF0ZSIsInByZXZlbnREZWZhdWx0IiwiY29tcG9uZW50IiwicHJvZHVjdElkIiwiZmluZERPTU5vZGUiLCJyZWZzIiwicHJvZHVjdF9pZCIsImxlbmd0aCIsImluc2VydERhdGEiLCJKU09OIiwic3RyaW5naWZ5IiwicHJvZHVjdF9uYW1lIiwicHJvZHVjdF9wcmljZSIsInByb2R1Y3RfaW1hZ2VfdXJsIiwiZmV0Y2giLCJtZXRob2QiLCJib2R5IiwiaGVhZGVycyIsIkhlYWRlcnMiLCJ0aGVuIiwicmVzIiwianNvbiIsImRhdGEiLCJwdXNoIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZWRpdERhdGEiLCJpIiwic3BsaWNlIiwibWFwIiwicCIsImhhbmRsZURlbGV0ZSIsImhhbmRsZVNlbGVjdCIsImhhbmRsZUNoYW5nZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7OztBQUNBOzs7O0FBRUE7Ozs7OztBQUVBLElBQU1BLE1BQU1DLFNBQVNDLGNBQVQsQ0FBd0IsS0FBeEIsQ0FBWjtBQUNBLG1C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QWxCLENBQXVCLElBQXZCLEVBQTZCLFVBQTdCLENBQXBIO0FBRkYsYUFiRjtBQWlCRTtBQUFBO0FBQUE7QUFDRSx1REFBTyxXQUFNLGlCQUFiLEVBQStCLE1BQUssUUFBcEMsRUFBNkMsT0FBTSxRQUFuRDtBQURGO0FBakJGO0FBaENKLFNBREo7QUF3REQsT0F6REQsTUEwREs7QUFDSCxlQUFPO0FBQUE7QUFBQTtBQUFBO0FBQUEsU0FBUDtBQUNEO0FBQ0Y7Ozs7OztrQkFFWVYsTyIsImZpbGUiOiJpbmRleC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBSZWFjdERPTSBmcm9tIFwicmVhY3QtZG9tXCI7XHJcblxyXG5pbXBvcnQgTGF5b3V0IGZyb20gXCIuL2NvbXBvbmVudHMvTGF5b3V0XCI7XHJcbiBcclxuY29uc3QgYXBwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcCcpO1xyXG5SZWFjdERPTS5yZW5kZXIoPExheW91dC8+LCBhcHApO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9qcy9pbmRleC5qcyIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IEhlYWRlciBmcm9tIFwiLi9IZWFkZXJcIjtcclxuaW1wb3J0IFByb2R1Y3QgZnJvbSBcIi4vUHJvZHVjdFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGF5b3V0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuXHRjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG5cdFx0c3VwZXIocHJvcHMpO1xyXG5cdH1cclxuXHRcclxuXHRyZW5kZXIoKSB7XHRcdFxyXG5cdFx0cmV0dXJuIChcclxuXHRcdFx0PGRpdj5cclxuXHRcdFx0XHQ8SGVhZGVyIHRleHQ9XCJIZWxsbyBSZWFjdFwiIC8+XHJcblx0XHRcdFx0PFByb2R1Y3QgLz5cclxuXHRcdFx0PC9kaXY+XHJcblx0XHQpO1xyXG5cdH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvanMvY29tcG9uZW50cy9MYXlvdXQuanMiLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIZWFkZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG5cdGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcblx0XHRzdXBlcihwcm9wcyk7XHJcblx0fVxyXG5cclxuXHJcblxyXG5cdHJlbmRlcigpIHtcclxuXHRcdHJldHVybiAoXHJcblx0XHRcdDxoMSBzdHlsZT17e2NvbG9yOiAnI0NCMzgzNyd9fT57dGhpcy5wcm9wcy50ZXh0fTwvaDE+XHJcblx0XHQpO1xyXG5cdH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvanMvY29tcG9uZW50cy9IZWFkZXIuanMiLCJpbXBvcnQgUmVhY3QsIHtDb21wb25lbnR9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XHJcblxyXG5jbGFzcyBQcm9kdWN0IGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgbG9hZGluZzogdHJ1ZSxcclxuICAgICAgcHJvZHVjdHM6IFtdLFxyXG5cclxuICAgICAgcHJvZHVjdDoge1xyXG4gICAgICAgIF9pZDogJycsXHJcbiAgICAgICAgbmFtZTogJycsXHJcbiAgICAgICAgcHJpY2U6IDAsXHJcbiAgICAgICAgaW1hZ2VVcmw6ICcnXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmhhbmRsZVN1Ym1pdCA9IHRoaXMuaGFuZGxlU3VibWl0LmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICAvLyBCSU5ESU5HXHJcbiAgaGFuZGxlQ2hhbmdlKGZpZWxkLCBldmVudCkge1xyXG4gICAgdmFyIG9iamVjdCA9IHRoaXMuc3RhdGUucHJvZHVjdDtcclxuICAgIG9iamVjdFtmaWVsZF0gPSBldmVudC50YXJnZXQudmFsdWU7XHJcbiAgICB0aGlzLnNldFN0YXRlKHsgcHJvZHVjdDogb2JqZWN0IH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gU1VCTUlUIChBREQgLyBFRElUKVxyXG4gIGhhbmRsZVN1Ym1pdChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIHZhciBjb21wb25lbnQgPSB0aGlzO1xyXG4gICAgdmFyIHByb2R1Y3RJZCA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKGNvbXBvbmVudC5yZWZzLnByb2R1Y3RfaWQpLnZhbHVlO1xyXG5cclxuICAgIGlmIChwcm9kdWN0SWQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIC8vIElOU0VSVFxyXG4gICAgICB2YXIgaW5zZXJ0RGF0YSA9IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzLnJlZnMucHJvZHVjdF9uYW1lKS52YWx1ZSxcclxuICAgICAgICBwcmljZTogUmVhY3RET00uZmluZERPTU5vZGUodGhpcy5yZWZzLnByb2R1Y3RfcHJpY2UpLnZhbHVlLFxyXG4gICAgICAgIGltYWdlVXJsOiBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzLnJlZnMucHJvZHVjdF9pbWFnZV91cmwpLnZhbHVlLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGZldGNoKCcvcHJvZHVjdCcsIHtcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBib2R5OiBpbnNlcnREYXRhLFxyXG4gICAgICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJzKHtcclxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICB9KVxyXG4gICAgICB9KVxyXG4gICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxyXG4gICAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICB2YXIgcHJvZHVjdHMgPSBjb21wb25lbnQuc3RhdGUucHJvZHVjdHM7XHJcbiAgICAgICAgICBwcm9kdWN0cy5wdXNoKGRhdGEpO1xyXG5cclxuICAgICAgICAgIGNvbXBvbmVudC5zdGF0ZS5wcm9kdWN0ID0ge1xyXG4gICAgICAgICAgICBfaWQ6ICcnLFxyXG4gICAgICAgICAgICBuYW1lOiAnJyxcclxuICAgICAgICAgICAgcHJpY2U6IDAsXHJcbiAgICAgICAgICAgIGltYWdlVXJsOiAnJ1xyXG4gICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICBjb21wb25lbnQuc2V0U3RhdGUodGhpcy5zdGF0ZSk7XHJcblxyXG4gICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBFRElUXHJcbiAgICAgIHZhciBlZGl0RGF0YSA9IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzLnJlZnMucHJvZHVjdF9uYW1lKS52YWx1ZSxcclxuICAgICAgICBwcmljZTogUmVhY3RET00uZmluZERPTU5vZGUodGhpcy5yZWZzLnByb2R1Y3RfcHJpY2UpLnZhbHVlLFxyXG4gICAgICAgIGltYWdlVXJsOiBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzLnJlZnMucHJvZHVjdF9pbWFnZV91cmwpLnZhbHVlLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGZldGNoKCcvcHJvZHVjdC8nICsgcHJvZHVjdElkLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgICBib2R5OiBlZGl0RGF0YSxcclxuICAgICAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh7XHJcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgfSlcclxuICAgICAgfSlcclxuICAgICAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSlcclxuICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgdmFyIHByb2R1Y3RzID0gY29tcG9uZW50LnN0YXRlLnByb2R1Y3RzO1xyXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9kdWN0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAocHJvZHVjdHNbaV0uX2lkID09PSBwcm9kdWN0SWQpIHtcclxuXHJcbiAgICAgICAgICAgICAgcHJvZHVjdHNbaV0ubmFtZSA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMucmVmcy5wcm9kdWN0X25hbWUpLnZhbHVlO1xyXG4gICAgICAgICAgICAgIHByb2R1Y3RzW2ldLnByaWNlID0gUmVhY3RET00uZmluZERPTU5vZGUodGhpcy5yZWZzLnByb2R1Y3RfcHJpY2UpLnZhbHVlO1xyXG4gICAgICAgICAgICAgIHByb2R1Y3RzW2ldLmltYWdlVXJsID0gUmVhY3RET00uZmluZERPTU5vZGUodGhpcy5yZWZzLnByb2R1Y3RfaW1hZ2VfdXJsKS52YWx1ZTtcclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICBjb21wb25lbnQuc3RhdGUucHJvZHVjdCA9IHtcclxuICAgICAgICAgICAgICAgIF9pZDogJycsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnJyxcclxuICAgICAgICAgICAgICAgIHByaWNlOiAwLFxyXG4gICAgICAgICAgICAgICAgaW1hZ2VVcmw6ICcnXHJcbiAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgY29tcG9uZW50LnNldFN0YXRlKHRoaXMuc3RhdGUpO1xyXG5cclxuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gU0VMRUNUIFJPV1xyXG4gIGhhbmRsZVNlbGVjdChwcm9kdWN0SWQsIGV2ZW50KSB7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3RhdGUucHJvZHVjdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKHRoaXMuc3RhdGUucHJvZHVjdHNbaV0uX2lkID09PSBwcm9kdWN0SWQpIHtcclxuICAgICAgICB0aGlzLnN0YXRlLnByb2R1Y3QgPSB0aGlzLnN0YXRlLnByb2R1Y3RzW2ldO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3Byb2R1Y3Q6IHRoaXMuc3RhdGUucHJvZHVjdH0pO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gREVMRVRFXHJcbiAgaGFuZGxlRGVsZXRlKHByb2R1Y3RJZCwgZXZlbnQpIHtcclxuICAgIHZhciBjb21wb25lbnQgPSB0aGlzO1xyXG4gICAgZmV0Y2goJy9wcm9kdWN0LycgKyBwcm9kdWN0SWQsIHtcclxuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgaGVhZGVyczogbmV3IEhlYWRlcnMoe1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgfSlcclxuICAgIH0pLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXHJcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgdmFyIHByb2R1Y3RzID0gY29tcG9uZW50LnN0YXRlLnByb2R1Y3RzO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvZHVjdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGlmIChwcm9kdWN0c1tpXS5faWQgPT09IHByb2R1Y3RJZCkge1xyXG4gICAgICAgICAgICBwcm9kdWN0cy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgIGNvbXBvbmVudC5zZXRTdGF0ZSh7IHByb2R1Y3RzOiBwcm9kdWN0cyB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSkuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICBmZXRjaCgnL3Byb2R1Y3QvYWxsJylcclxuICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXHJcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHByb2R1Y3RzOiBkYXRhIH0pO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBsb2FkaW5nOiBmYWxzZSB9KTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBpZiAodGhpcy5zdGF0ZS5sb2FkaW5nID09PSBmYWxzZSkge1xyXG4gICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICA8aDE+UHJvZHVjdHM8L2gxPlxyXG4gICAgICAgICAgICAgIDx0YWJsZSBjbGFzcz1cInRhYmxlIHRhYmxlLWhvdmVyXCI+XHJcbiAgICAgICAgICAgICAgICA8dGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICA8dGg+SWQ8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0aD5OYW1lPC90aD5cclxuICAgICAgICAgICAgICAgICAgICA8dGg+UHJpY2U8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0aD5JbWFnZTwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRoPjwvdGg+XHJcbiAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICA8L3RoZWFkPlxyXG4gICAgICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgICAge3RoaXMuc3RhdGUucHJvZHVjdHMubWFwKHAgPT5cclxuICAgICAgICAgICAgICAgICAgPHRyIGtleT17cC5faWR9PlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD57cC5faWR9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+e3AubmFtZX08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD57cC5wcmljZX08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPXtwLmltYWdlVXJsfSBoZWlnaHQ9XCIxMDBweFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJ0ZXh0LXJpZ2h0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYnRuLWdyb3VwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLWRhbmdlclwiIG9uQ2xpY2s9e3RoaXMuaGFuZGxlRGVsZXRlLmJpbmQodGhpcywgcC5faWQpfT5EZWxldGU8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4taW5mb1wiIG9uQ2xpY2s9e3RoaXMuaGFuZGxlU2VsZWN0LmJpbmQodGhpcywgcC5faWQpfT5TZWxlY3Q8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgICAgICAgIDxociAvPlxyXG4gICAgICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXt0aGlzLmhhbmRsZVN1Ym1pdH0+ICAgICAgIFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cclxuICAgICAgICAgICAgICAgICAgPGxhYmVsPklkOjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIHJlYWRPbmx5IGNsYXNzPVwiaW5wdXQgZm9ybS1jb250cm9sXCIgcmVmPVwicHJvZHVjdF9pZFwiIHZhbHVlPXt0aGlzLnN0YXRlLnByb2R1Y3QuX2lkfSBvbkNoYW5nZT17dGhpcy5oYW5kbGVDaGFuZ2UuYmluZCh0aGlzLCAnX2lkJyl9IC8+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj4gICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cclxuICAgICAgICAgICAgICAgICAgPGxhYmVsPk5hbWU6PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJpbnB1dCBmb3JtLWNvbnRyb2xcIiByZWY9XCJwcm9kdWN0X25hbWVcIiB2YWx1ZT17dGhpcy5zdGF0ZS5wcm9kdWN0Lm5hbWV9IG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUNoYW5nZS5iaW5kKHRoaXMsICduYW1lJyl9IC8+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxsYWJlbD5QcmljZTo8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImlucHV0IGZvcm0tY29udHJvbFwiIHJlZj1cInByb2R1Y3RfcHJpY2VcIiB2YWx1ZT17dGhpcy5zdGF0ZS5wcm9kdWN0LnByaWNlfSBvbkNoYW5nZT17dGhpcy5oYW5kbGVDaGFuZ2UuYmluZCh0aGlzLCAncHJpY2UnKX0gLz5cclxuICAgICAgICAgICAgICAgIDwvZGl2PiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxyXG4gICAgICAgICAgICAgICAgICA8bGFiZWw+SW1hZ2UgVXJsOjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiaW5wdXQgZm9ybS1jb250cm9sXCIgcmVmPVwicHJvZHVjdF9pbWFnZV91cmxcIiB2YWx1ZT17dGhpcy5zdGF0ZS5wcm9kdWN0LmltYWdlVXJsfSBvbkNoYW5nZT17dGhpcy5oYW5kbGVDaGFuZ2UuYmluZCh0aGlzLCAnaW1hZ2VVcmwnKX0gLz5cclxuICAgICAgICAgICAgICAgIDwvZGl2PiAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiIHR5cGU9XCJzdWJtaXRcIiB2YWx1ZT1cIlN1Ym1pdFwiIC8+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICByZXR1cm4oPGgxPkxvYWRpbmcgLi4uPC9oMT4pO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBQcm9kdWN0O1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvanMvY29tcG9uZW50cy9Qcm9kdWN0LmpzIl0sInNvdXJjZVJvb3QiOiIifQ==